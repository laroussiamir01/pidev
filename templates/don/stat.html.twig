{% extends 'back.html.twig' %}



{% block body %}

      <canvas id="myChart" width="1000" height="750"></canvas>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  #myChart {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .chart-title {
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
    color: #333;
  }
</style>
<script>
  var data = {{ data|json_encode()|raw }};
  
  var labels = [];
  var counts = [];
  var ids = [];
  
  for (var nomActivite in data) {
    labels.push(nomActivite);
    counts.push(data[nomActivite]['count']);
    ids.push(data[nomActivite]['id']);
  }
  
  var ctx = document.getElementById('myChart').getContext('2d');
  
  var chart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: labels,
      datasets: [{
        label: 'Nombre de dons',
        data: counts,
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(54, 162, 235, 0.2)',
          'rgba(255, 206, 86, 0.2)',
          'rgba(75, 192, 192, 0.2)',
          'rgba(153, 102, 255, 0.2)',
          'rgba(255, 159, 64, 0.2)'
        ],
        borderColor: [
          'rgba(255, 99, 132, 1)',
          'rgba(54, 162, 235, 1)',
          'rgba(255, 206, 86, 1)',
          'rgba(75, 192, 192, 1)',
          'rgba(153, 102, 255, 1)',
          'rgba(255, 159, 64, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      title: {
        display: true,
        text: 'Nombre des dons par nom'
      },
      legend: {
        labels: {
          fontColor: '#666'
        }
      },
      onClick: function(event, elements) {
        if (elements.length > 0) {
          var idList = ids[elements[0].index];
          alert('IDs des dons : ' + idList.join(', '));
        }
      }
    }
  });
</script>
{% endblock %}